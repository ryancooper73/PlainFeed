<!DOCTYPE html>
<html>
<%- include('partials/head') %>
<body>
  <div class="container">
    <%- include('partials/header', { user }) %>
    
    <div class="page-transition">
      <% if (typeof user !== 'undefined' && user) { %>
        <a href="/create-post" class="btn" style="margin-bottom: 2rem;">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Create Post
        </a>
      <% } else { %>
        <div class="post" style="text-align: center;">
          <p>Please <a href="/login" style="color: var(--primary)">login</a> to create posts</p>
        </div>
      <% } %>
      
      <div class="posts">
        <% posts.forEach(function(post) { %>
          <div class="post">
            <div class="post-meta">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
              <strong><%= post.author %></strong> â€¢ 
              <%= new Date(post.timestamp).toLocaleString() %>
            </div>
            <div class="post-content">
              <%= post.content %>
            </div>
            <% if (post.image) { %>
              <div class="post-image">
                <img src="<%= post.image %>" alt="Post image">
              </div>
            <% } %>
          </div>
        <% }); %>
      </div>
    </div>
  </div>
</body>
</html>